---
title: 对象是否存活
date: 2015-07-10 11:27:31
categories: JVM
tags: [java, JVM]
photos: 
- http://7xlbns.com1.z0.glb.clouddn.com/%40%2Fhihuaning%2Fimage%2Flb%2Flb15.jpg
---

在堆里存放着几乎所有的对象实例，垃圾收集器在对堆进行回收前，第一件事是判断哪些对象还“存活”，哪些对象已经“死去”（即不可能再被任何途径使用的对象）。

* ### 引用计数器算法
  给对象中添加一个引用计数器，每当有一个地方引用它时，计数器值就加1:；当引用失效时，计数器就减1；任何时刻计数器为0的对象就是不可能再被使用的。
引用计数算法的实现简单，判定效率也很高。但是，主流的Java虚拟机里面没有选用引用计数算法来管理内存，其中主要原因是它很难解决对象之间相互循环引用的问题。

* ### 可达性分析算法
  在主流的商用程序语言（Java，C#）的主流实现中，都是通过可达性分析来判定对象是否存活。这个算法那的基本思想是通过一系列的称为“GC Roots”的对象作为起始点，从这些节点开始向下搜索，搜索所走过的路径成为引用链（Reference Chain），当一个对象到GC Roots没有任何引用链相连时，则证明此对象是不可用的。
在Java语言中，可作为GC Roots的对象包括下面几种：
** 1，虚拟机栈中（栈帧中的本地变量表）的引用的对象。**
** 2，方法区中类静态属性引用的对象。**
** 3，方法区中常量引用的对象。**
** 4，本地方法栈中JNI引用的对象。**

----
#### 参考自：
[深入理解Java虚拟机](https://book.douban.com/subject/24722612/)